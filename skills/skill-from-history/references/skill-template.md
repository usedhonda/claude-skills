# Skill Generation Template

Complete template and examples for skills generated by skill-from-history.

## Template Structure

Generated skills follow this structure with evidence linking:

```yaml
---
name: [skill-name]
description: [Extracted description with trigger phrases from patterns]
---

# [Skill Title]

[Brief introduction based on extracted patterns] [E1][E2]

## When to Use

- [Trigger condition from history] [E1]
- [Another trigger from patterns] [E3]

## Core Pattern

[Main code pattern extracted from history] [E1][E4]

### Template

```[language]
[Reusable template from extracted patterns]
```

**Evidence**: Derived from [description] [E1], refined in [E4]

## Implementation Steps

1. [Step derived from history] [E2]
2. [Step derived from history] [E5]

## Variations

### [Variation Name]
[Alternative approach found in history] [E6]

## Best Practices

- [Practice observed in history] [E3]
- [Practice observed in history] [E7]

## Constraints (Auto-generated from negative learning)

The following patterns have been explicitly rejected in this project:

### Critical (Must avoid)

| Pattern | Instead Use | Reason | Evidence |
|---------|-------------|--------|----------|
| [Rejected pattern] | [Alternative] | [Why] | [E8][E9] |

### Warnings

| Pattern | Preferred | Reason | Evidence |
|---------|-----------|--------|----------|
| [Discouraged pattern] | [Better approach] | [Why] | [E10] |

---

## Evidence Index

Evidence supporting patterns and constraints in this skill.

### Sessions

| ID | Session | Date | Description |
|----|---------|------|-------------|
| E1 | `abc123` | 2024-12-15 | Initial pattern implementation |
| E3 | `def456` | 2024-12-18 | Trigger condition discussion |
| E8 | `ghi789` | 2024-12-20 | "Don't use X, we use Y instead" |

### Commits

| ID | Hash | Date | Message |
|----|------|------|---------|
| E2 | `a1b2c3d` | 2024-12-16 | feat: add pattern implementation |
| E4 | `e4f5g6h` | 2024-12-17 | refactor: optimize pattern |
| E5 | `i7j8k9l` | 2024-12-19 | docs: add step documentation |

### Code Patterns

| ID | File | Lines | Pattern |
|----|------|-------|---------|
| E6 | `src/example.ts` | 15-28 | Alternative approach template |
| E7 | `src/utils.ts` | 42-55 | Best practice implementation |
```

## Example Session

Typical interaction when using `/skill-from-history`:

```
User: /skill-from-history

Claude: Analyzing project history...

Found: 45 conversation sessions, 230 commits, 156 source files

## Analysis Results

### New Skill Candidates

1. **firebase-auth-flow** (Confidence: 92%)
   - Category: Development & Technical
   - Found in: 12 sessions, 25 commits
   - Pattern: Firebase authentication with custom claims
   - Includes: Login, logout, token refresh, role checking
   - Key Evidence:
     - [E1] Session abc123: "Use Firebase custom claims for roles"
     - [E2] Commit a1b2c3d: feat(auth): add custom claims handling

2. **api-error-handling** (Confidence: 85%)
   - Category: Development & Technical
   - Found in: 8 sessions, 18 commits
   - Pattern: Consistent error response format
   - Key Evidence:
     - [E3] Session def456: Error handling discussion
     - [E4] Commit e4f5g6h: fix(api): standardize error format

### Detected Constraints (Negative Learning)

3. **[constraint-express-router]** (Confidence: 90%)
   - Severity: Critical
   - Rejected: Express.js router
   - Use instead: Hono framework
   - Evidence:
     - [E5] Session ghi789: "No, we use Hono for all new endpoints"
     - [E6] Session jkl012: "Don't use Express, switch to Hono"
     - [E7] Session mno345: "Express is deprecated in our project"

### Existing Skill Updates

4. **[existing: deployment-workflow]** + 2 new patterns
   - New: Canary deployment steps, rollback procedure
   - Evidence: [E8] 3 sessions discussing deployment
   - Action needed: Merge or create separate

Which skills would you like to generate? (e.g., "1, 2" or "all")

User: 1

Claude: Generating firebase-auth-flow skill...

Created:
- .claude/skills/firebase-auth-flow/SKILL.md (1,847 words)
- .claude/skills/firebase-auth-flow/references/patterns.md

The skill includes:
- 8 evidence references (E1-E8)
- Evidence Index with sessions, commits, and code patterns
- 1 Critical constraint from negative learning

You can now use this skill by mentioning "Firebase auth" or
"authentication flow" in your prompts.
```

## Best Practices

### Keep Skills Focused

Each skill should address one coherent domain:
- Good: `firebase-auth-flow` (single domain)
- Bad: `firebase-and-api-and-deploy` (too broad)

### Evidence Quality

Prioritize evidence that shows:
1. **Explicit patterns**: Clear code examples
2. **User corrections**: Anti-patterns to avoid
3. **Recent commits**: Current best practices

### Progressive Disclosure

Generated skills should also use progressive disclosure:
- Main SKILL.md: Overview and essential patterns
- references/: Detailed examples, edge cases, troubleshooting
